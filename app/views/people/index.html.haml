.page-header
  %h1
    People (#{@people.total_count})
.row
  .col-xs-12
    .panel.panel-default
      .panel-heading
        .panel-title Filters
      .panel-body
        = form_tag people_path, method: :get, class: 'form-inline' do
          .form-group
            = text_field_tag 'filter[search_term]', filter_value(:search_term), class: 'form-control', placeholder: 'Search term', size: 32
          .form-group
            = label_tag 'filter[subtype]', 'Subtype'
            = select_tag 'filter[subtype]',
                options_from_collection_for_select(Person.subtypes, :subtype, :subtype, filter_value(:subtype)),
                prompt: '-- all --',
                class: 'form-control'
          .checkbox
            %label
              = check_box_tag :with_user, '1', params[:with_user].present?
              Show only with user
    
          = submit_tag 'Apply', class: 'btn btn-primary'
          = link_to 'Reset', people_path, class: 'btn btn-default'
      .panel-footer
        = link_to new_person_path, class: 'btn btn-default' do
          %span.glyphicon.glyphicon-plus
          Create person

.row
  .col-xs-12
    %table.table.table-striped
      %thead
        %tr
          %th Full name
          %th User
          %th Pseudonym
          %th Subtype
          %th Actions
      %tbody
        = render @people
    
= paginate @people
